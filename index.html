<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>My Crypto Portfolio</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 20px; }
    h1 { text-align: center; }
    table { width: 100%; border-collapse: collapse; background: white; margin-top: 20px; }
    th, td { padding: 12px; border: 1px solid #ddd; text-align: center; }
    th { background-color: #333; color: white; }
    .positive { color: green; }
    .negative { color: red; }
  </style>
</head>
<body>
  <h1>π“ λ‚΄ μ•”νΈν™”ν ν¬νΈν΄λ¦¬μ¤ (KRW)</h1>

  <table>
    <thead>
      <tr>
        <th>μ½”μΈ</th>
        <th>λ³΄μ λ‰</th>
        <th>λ§¤μκ°€ (β‚©)</th>
        <th>ν„μ¬κ°€ (β‚©)</th>
        <th>μ΄ λ§¤μκΈ</th>
        <th>ν„μ¬ κ°€μΉ</th>
        <th>μ†μµ</th>
        <th>λ³€λ™λ¥ </th>
      </tr>
    </thead>
    <tbody id="portfolio-body"></tbody>
  </table>

  <script>
    const KRW_EXCHANGE = 1380; // 1 USD = 1380 KRW (approx)

    const portfolio = [
      { coin: "ADA", amount: 176.2, buyPrice: 0.83, symbol: "cardano" },
      { coin: "BTC", amount: 0.000669, buyPrice: 118000, symbol: "bitcoin" },
      { coin: "ETH", amount: 0.0204, buyPrice: 3560, symbol: "ethereum" },
      { coin: "XRP", amount: 21.31, buyPrice: 3.41, symbol: "ripple" },
      { coin: "ADA (wallet1)", amount: 100, buyPrice: 0.83, symbol: "cardano" },
      { coin: "DOGE", amount: 156.1, buyPrice: 0.247, symbol: "dogecoin" },
      { coin: "ETH (wallet1)", amount: 0.0144, buyPrice: 3560, symbol: "ethereum" },
      { coin: "XRP (wallet1)", amount: 26.732, buyPrice: 3.41, symbol: "ripple" },
    ];

    async function fetchPricesAndUpdate() {
      const symbols = [...new Set(portfolio.map(p => p.symbol))];
      const response = await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${symbols.join(',')}&vs_currencies=usd`);
      const prices = await response.json();

      const tbody = document.getElementById("portfolio-body");
      tbody.innerHTML = "";

      portfolio.forEach(asset => {
        const currentPrice = prices[asset.symbol]?.usd || 0;
        const totalBuy = asset.amount * asset.buyPrice * KRW_EXCHANGE;
        const totalCurrent = asset.amount * currentPrice * KRW_EXCHANGE;
        const profit = totalCurrent - totalBuy;
        const percent = (profit / totalBuy) * 100;

        const row = document.createElement("tr");
        row.innerHTML = `
          <td>${asset.coin}</td>
          <td>${asset.amount}</td>
          <td>${(asset.buyPrice * KRW_EXCHANGE).toLocaleString()}β‚©</td>
          <td>${(currentPrice * KRW_EXCHANGE).toLocaleString()}β‚©</td>
          <td>${totalBuy.toLocaleString(undefined, { maximumFractionDigits: 0 })}β‚©</td>
          <td>${totalCurrent.toLocaleString(undefined, { maximumFractionDigits: 0 })}β‚©</td>
          <td class="${profit >= 0 ? 'positive' : 'negative'}">
            ${profit >= 0 ? '+' : ''}${profit.toLocaleString(undefined, { maximumFractionDigits: 0 })}β‚©
          </td>
          <td class="${percent >= 0 ? 'positive' : 'negative'}">
            ${percent >= 0 ? '+' : ''}${percent.toFixed(2)}%
          </td>
        `;
        tbody.appendChild(row);
      });
    }

    fetchPricesAndUpdate();
    setInterval(fetchPricesAndUpdate, 5000);
  </script>
</body>
</html>
